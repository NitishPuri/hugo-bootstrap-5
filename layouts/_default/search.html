{{ define "main" }}

<script type="text/javascript">
  function search() { 
      if(event.keyCode == 13 || event.button == 0) {
          location.href = "/search?s=" + document.getElementById("search_input").value 
      }
  }
</script>

<div class="input-group input-group-sm mb-3">
  <input type="text" class="form-control" aria-label="Small" aria-describedby="inputGroup-sizing-sm" id="search_input" onkeydown="search()">
  <div class="input-group-append">
    <button class="btn btn-outline-secondary" type="button" id="inputGroup-sizing-sm" onclick = "search()">Search</button>
  </div>
</div>

<section class="resume-section p-3 p-lg-5 d-flex flex-column">
  <div class="my-auto" >
    <!-- <form action="{{ "search" | absURL }}">
      <input id="search-query" name="s"/>
    </form> -->
    <div id="search-results">
     <h3>Matching pages</h3>
    </div>
  </div>
</section>
<!-- this template is sucked in by search.js and appended to the search-results div above. So editing here will adjust style -->
<script id="search-result-template" type="text/x-js-template">
    <div id="summary-${key}">
      <h4><a href="${link}">${title}</a></h4>
      <p>${snippet}</p>
      ${ isset tags }<p>Tags: ${tags}</p>${ end }
      ${ isset categories }<p>Categories: ${categories}</p>${ end }
    </div>
</script>
{{ end }}

{{ define "post_footer" }}
<script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/3.2.0/fuse.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/jquery.mark.js" integrity="sha512-19TrqSGVSwaC2IDGHrD+tAkX59/w5cXy0BHDVwn7OJQXxavORhFSFM7DOO9soXKuo8O7gGNHiG9R2vFrXRBcTQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script src="{{ "js/search.js" | absURL }}"></script>
{{ end }}
